class Solution {

    public double findMedianSortedArrays(int[] nums1, int[] nums2) {

        int total = nums1.length + nums2.length;

        if (total % 2 == 1)
            return findKth(nums1, 0, nums2, 0, total/2 + 1);
        else {
            int left  = findKth(nums1, 0, nums2, 0, total/2);
            int right = findKth(nums1, 0, nums2, 0, total/2 + 1);
            return (left + right) / 2.0;
        }
    }

    private int findKth(int[] A, int startA, int[] B, int startB, int k) {

        // 1. If A exhausted
        if (startA >= A.length)
            return B[startB + k - 1];

        // 2. If B exhausted
        if (startB >= B.length)
            return A[startA + k - 1];

        // 3. If k == 1 â†’ smallest element
        if (k == 1)
            return Math.min(A[startA], B[startB]);

        int midA = Integer.MAX_VALUE;
        int midB = Integer.MAX_VALUE;

        if (startA + k/2 - 1 < A.length)
            midA = A[startA + k/2 - 1];

        if (startB + k/2 - 1 < B.length)
            midB = B[startB + k/2 - 1];

        if (midA < midB)
            return findKth(A, startA + k/2, B, startB, k - k/2);
        else
            return findKth(A, startA, B, startB + k/2, k - k/2);
    }
}
           // Tc= O(log(m+n)) Sc=O(log(m+n))
